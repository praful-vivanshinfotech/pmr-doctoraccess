import{A as he,i as J,I as ve,B as ye,a as me}from"./InputError.43f4772e.js";import{z as ge,A as Ie,r as O,j as d,a as j,T as q,D as K,t as Se,F as be}from"./index.f41b60b0.js";const Oe=ge(),B=Oe;var ne={};(function(y){Object.defineProperty(y,"__esModule",{value:!0}),y.default=void 0;var h=w(O.exports),m=["placeholder","separator","isLastChild","inputStyle","focus","isDisabled","hasErrored","errorStyle","focusStyle","disabledStyle","shouldAutoFocus","isInputNum","index","value","className","isInputSecure"];function g(t){if(typeof WeakMap!="function")return null;var a=new WeakMap,o=new WeakMap;return(g=function(n){return n?o:a})(t)}function w(t,a){if(!a&&t&&t.__esModule)return t;if(t===null||N(t)!=="object"&&typeof t!="function")return{default:t};var o=g(a);if(o&&o.has(t))return o.get(t);var e={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var l=n?Object.getOwnPropertyDescriptor(t,i):null;l&&(l.get||l.set)?Object.defineProperty(e,i,l):e[i]=t[i]}return e.default=t,o&&o.set(t,e),e}function I(){return I=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var o=arguments[a];for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])}return t},I.apply(this,arguments)}function T(t,a){if(t==null)return{};var o=A(t,a),e,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)e=i[n],!(a.indexOf(e)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,e)||(o[e]=t[e]))}return o}function A(t,a){if(t==null)return{};var o={},e=Object.keys(t),n,i;for(i=0;i<e.length;i++)n=e[i],!(a.indexOf(n)>=0)&&(o[n]=t[n]);return o}function E(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function W(t,a){for(var o=0;o<a.length;o++){var e=a[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function k(t,a,o){return a&&W(t.prototype,a),o&&W(t,o),t}function V(t,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),a&&f(t,a)}function f(t,a){return f=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e},f(t,a)}function v(t){var a=F();return function(){var e=L(t),n;if(a){var i=L(this).constructor;n=Reflect.construct(e,arguments,i)}else n=e.apply(this,arguments);return M(this,n)}}function M(t,a){return a&&(N(a)==="object"||typeof a=="function")?a:s(t)}function s(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function F(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function L(t){return L=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},L(t)}function c(t,a,o){return a in t?Object.defineProperty(t,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[a]=o,t}function N(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?N=function(o){return typeof o}:N=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},N(t)}var re=8,ae=37,oe=39,ue=46,ie=32,P=function(a){return N(a)==="object"},se=function(t){V(o,t);var a=v(o);function o(e){var n;return E(this,o),n=a.call(this,e),c(s(n),"getClasses",function(){for(var i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];return l.filter(function(u){return!P(u)&&u!==!1}).join(" ")}),c(s(n),"getType",function(){var i=n.props,l=i.isInputSecure,r=i.isInputNum;return l?"password":r?"tel":"text"}),n.input=h.default.createRef(),n}return k(o,[{key:"componentDidMount",value:function(){var n=this.props,i=n.focus,l=n.shouldAutoFocus,r=this.input.current;r&&i&&l&&r.focus()}},{key:"componentDidUpdate",value:function(n){var i=this.props.focus,l=this.input.current;n.focus!==i&&l&&i&&(l.focus(),l.select())}},{key:"render",value:function(){var n=this.props,i=n.placeholder,l=n.separator,r=n.isLastChild,u=n.inputStyle,p=n.focus,x=n.isDisabled,R=n.hasErrored,_=n.errorStyle,S=n.focusStyle,C=n.disabledStyle;n.shouldAutoFocus;var D=n.isInputNum,$=n.index,z=n.value,U=n.className;n.isInputSecure;var G=T(n,m);return h.default.createElement("div",{className:U,style:{display:"flex",alignItems:"center"}},h.default.createElement("input",I({"aria-label":"".concat($===0?"Please enter verification code. ":"").concat(D?"Digit":"Character"," ").concat($+1),autoComplete:"off",style:Object.assign({width:"1em",textAlign:"center"},P(u)&&u,p&&P(S)&&S,x&&P(C)&&C,R&&P(_)&&_),placeholder:i,className:this.getClasses(u,p&&S,x&&C,R&&_),type:this.getType(),maxLength:"1",ref:this.input,disabled:x,value:z||""},G)),!r&&l)}}]),o}(h.PureComponent),Q=function(t){V(o,t);var a=v(o);function o(){var e;E(this,o);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return e=a.call.apply(a,[this].concat(i)),c(s(e),"state",{activeInput:0}),c(s(e),"getOtpValue",function(){return e.props.value?e.props.value.toString().split(""):[]}),c(s(e),"getPlaceholderValue",function(){var r=e.props,u=r.placeholder,p=r.numInputs;if(typeof u=="string"){if(u.length===p)return u;u.length>0&&console.error("Length of the placeholder should be equal to the number of inputs.")}}),c(s(e),"handleOtpChange",function(r){var u=e.props.onChange,p=r.join("");u(p)}),c(s(e),"isInputValueValid",function(r){var u=e.props.isInputNum?!isNaN(parseInt(r,10)):typeof r=="string";return u&&r.trim().length===1}),c(s(e),"focusInput",function(r){var u=e.props.numInputs,p=Math.max(Math.min(u-1,r),0);e.setState({activeInput:p})}),c(s(e),"focusNextInput",function(){var r=e.state.activeInput;e.focusInput(r+1)}),c(s(e),"focusPrevInput",function(){var r=e.state.activeInput;e.focusInput(r-1)}),c(s(e),"changeCodeAtFocus",function(r){var u=e.state.activeInput,p=e.getOtpValue();p[u]=r[0],e.handleOtpChange(p)}),c(s(e),"handleOnPaste",function(r){r.preventDefault();var u=e.state.activeInput,p=e.props,x=p.numInputs,R=p.isDisabled;if(!R){for(var _=e.getOtpValue(),S=u,C=r.clipboardData.getData("text/plain").slice(0,x-u).split(""),D=0;D<x;++D)D>=u&&C.length>0&&(_[D]=C.shift(),S++);e.setState({activeInput:S},function(){e.focusInput(S),e.handleOtpChange(_)})}}),c(s(e),"handleOnChange",function(r){var u=r.target.value;e.isInputValueValid(u)&&e.changeCodeAtFocus(u)}),c(s(e),"handleOnKeyDown",function(r){r.keyCode===re||r.key==="Backspace"?(r.preventDefault(),e.changeCodeAtFocus(""),e.focusPrevInput()):r.keyCode===ue||r.key==="Delete"?(r.preventDefault(),e.changeCodeAtFocus("")):r.keyCode===ae||r.key==="ArrowLeft"?(r.preventDefault(),e.focusPrevInput()):r.keyCode===oe||r.key==="ArrowRight"?(r.preventDefault(),e.focusNextInput()):(r.keyCode===ie||r.key===" "||r.key==="Spacebar"||r.key==="Space")&&r.preventDefault()}),c(s(e),"handleOnInput",function(r){if(e.isInputValueValid(r.target.value))e.focusNextInput();else if(!e.props.isInputNum){var u=r.nativeEvent;u.data===null&&u.inputType==="deleteContentBackward"&&(r.preventDefault(),e.changeCodeAtFocus(""),e.focusPrevInput())}}),c(s(e),"renderInputs",function(){for(var r=e.state.activeInput,u=e.props,p=u.numInputs,x=u.inputStyle,R=u.focusStyle,_=u.separator,S=u.isDisabled,C=u.disabledStyle,D=u.hasErrored,$=u.errorStyle,z=u.shouldAutoFocus,U=u.isInputNum,G=u.isInputSecure,ce=u.className,X=[],Y=e.getOtpValue(),Z=e.getPlaceholderValue(),ee=e.props["data-cy"],te=e.props["data-testid"],pe=function(b){X.push(h.default.createElement(se,{placeholder:Z&&Z[b],key:b,index:b,focus:r===b,value:Y&&Y[b],onChange:e.handleOnChange,onKeyDown:e.handleOnKeyDown,onInput:e.handleOnInput,onPaste:e.handleOnPaste,onFocus:function(de){e.setState({activeInput:b}),de.target.select()},onBlur:function(){return e.setState({activeInput:-1})},separator:_,inputStyle:x,focusStyle:R,isLastChild:b===p-1,isDisabled:S,disabledStyle:C,hasErrored:D,errorStyle:$,shouldAutoFocus:z,isInputNum:U,isInputSecure:G,className:ce,"data-cy":ee&&"".concat(ee,"-").concat(b),"data-testid":te&&"".concat(te,"-").concat(b)}))},H=0;H<p;H++)pe(H);return X}),e}return k(o,[{key:"render",value:function(){var n=this.props.containerStyle;return h.default.createElement("div",{style:Object.assign({display:"flex"},P(n)&&n),className:P(n)?"":n},this.renderInputs())}}]),o}(h.Component);c(Q,"defaultProps",{numInputs:4,onChange:function(a){return console.log(a)},isDisabled:!1,shouldAutoFocus:!1,value:"",isInputSecure:!1});var le=Q;y.default=le})(ne);const xe=Ie(ne),_e=({totalTimeInSeconds:y,countdownEnded:h,initialText:m})=>{const g=O.exports.useRef(null),[w,I]=O.exports.useState(m),[T,A]=O.exports.useState(!1),E=f=>{const v=Date.parse(f)-Date.parse(new Date),M=Math.floor(v/1e3%60),s=Math.floor(v/1e3/60%60);return{total:v,minutes:s,seconds:M}},W=f=>{let{total:v,hours:M,minutes:s,seconds:F}=E(f);v>=0&&I((s>9?s:"0"+s)+":"+(F>9?F:"0"+F))},k=f=>{I(m),A(!0),g.current&&clearInterval(g.current);const v=setInterval(()=>{W(f)},1e3);g.current=v},V=()=>{let f=new Date;return f.setSeconds(f.getSeconds()+y),f};return O.exports.useEffect(()=>{A(!1),k(V())},[]),O.exports.useEffect(()=>{T&&w==="00:00"&&h()},[w]),d("span",{children:w})},Pe=()=>{const[y,h]=O.exports.useState(""),[m,g]=O.exports.useState(""),[w,I]=O.exports.useState(!1),T=()=>{I(!1)},A=()=>{I(!0)},E=()=>{y.length<4?g("Please enter otp"):g(""),J(m)&&console.log(y)};return j(he,{children:[j(B,{sx:{textAlign:"center"},children:[d(q,{variant:"h1",sx:{fontWeight:"500",letterSpacing:"-0.03em",textAlign:"center",marginBottom:3},children:"2-step verification"}),d(q,{variant:"p",children:"We've sent a verification code to the number associated with this account."})]}),j(B,{sx:{mt:4,textAlign:"center"},children:[d(q,{variant:"body1",mb:2,fontWeight:500,children:"Enter 4 digit code"}),j(B,{sx:{width:275,mx:"auto"},children:[d(xe,{containerStyle:{justifyContent:"center"},inputStyle:{border:`1px solid ${J(m)?K.palette.gray200:K.palette.error.main}`,width:"56px",height:"56px",margin:"0 8px",fontSize:"16px",borderRadius:8},focusStyle:{outline:"none",boxShadow:`${Se(K.palette.primary.main,.25)} 0 0 0 0.2rem`,border:`1px solid ${K.palette.primary.main}`},value:y,onChange:h,numInputs:4}),!J(m)&&d(ve,{errorMessage:m})]}),d(B,{mt:3,children:w?j(be,{children:["Resend code in",d(q,{variant:"span",sx:{pl:1,fontWeight:600},children:d(_e,{totalTimeInSeconds:60,initialText:"00:60",countdownEnded:T})})]}):d(ye,{variant:"text",sx:{textTransform:"initial",fontWeight:400,fontSize:14,textDecoration:"underline"},onClick:A,children:"Resend code"})}),d(B,{mt:2,children:d(me,{type:"submit",variant:"contained",disableElevation:!0,fullWidth:!0,size:"large",onClick:E,children:"Submit"})})]})]})};export{Pe as default};
